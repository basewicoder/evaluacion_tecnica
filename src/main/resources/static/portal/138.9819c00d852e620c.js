"use strict";(self.webpackChunkexamenfront=self.webpackChunkexamenfront||[]).push([[138],{2138:(Qt,N,c)=>{c.r(N),c.d(N,{SysModule:()=>Ft});var q=c(7629),w=c(9132),t=c(4650),d=c(9094),p=c(5791),y=c(3478),z=c(6858),x=c(1971);const L=["st"],k=function(){return{toTop:!1}},Y=function(){return{pi:"pageNum",ps:"pageSize"}},I=function(n){return{reName:n}},O=function(){return{total:"data.total",list:"data.list"}};let J=(()=>{class n{constructor(e,i){this.http=e,this.modal=i,this.url="/api/log/list",this.searchSchema={properties:{no:{type:"string",title:"n\xfamero de serie"}}},this.columns=[{title:"id",type:"no"},{title:"username",index:"username"},{title:"apordo",index:"nickName"},{title:"direcci\xf3n de solicitud",index:"requestUrl"},{title:"p\xe9rdida de tiempo",type:"number",index:"runTime"},{title:"tiempo",type:"date",index:"createdDate"}]}ngOnInit(){}add(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.lP),t.Y36(d.Te))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-log"]],viewQuery:function(e,i){if(1&e&&t.Gf(L,5),2&e){let o;t.iGM(o=t.CRH())&&(i.st=o.first)}},decls:5,vars:13,consts:[["mode","search",3,"schema","formSubmit","formReset"],[3,"data","page","req","res","columns"],["st",""]],template:function(e,i){if(1&e){const o=t.EpF();t._UZ(0,"page-header"),t.TgZ(1,"nz-card")(2,"sf",0),t.NdJ("formSubmit",function(r){t.CHM(o);const l=t.MAs(4);return t.KtG(l.reset(r))})("formReset",function(r){t.CHM(o);const l=t.MAs(4);return t.KtG(l.reset(r))}),t.qZA(),t._UZ(3,"st",1,2),t.qZA()}2&e&&(t.xp6(2),t.Q6J("schema",i.searchSchema),t.xp6(1),t.Q6J("data",i.url)("page",t.DdM(6,k))("req",t.VKq(8,I,t.DdM(7,Y)))("res",t.VKq(11,I,t.DdM(10,O)))("columns",i.columns))},dependencies:[p.kJ,y.q,z.A5,x.bd],encapsulation:2}),n})();var C=c(5156),g=c(9651),_=c(6895),m=c(6616),h=c(7044),f=c(1811),S=c(5681);function D(n,s){1&n&&t._UZ(0,"nz-spin",4)}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"sf",5,6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.close())}),t._uU(4,"cierre"),t.qZA(),t.TgZ(5,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),a=t.oxw();return t.KtG(a.save(o.value))}),t._uU(6,"Aceptar"),t.qZA()()()}if(2&n){const e=t.MAs(1),i=t.oxw();t.Q6J("schema",i.schema)("ui",i.ui)("formData",i.i),t.xp6(5),t.Q6J("disabled",!e.valid)("nzLoading",i.http.loading)}}let v=(()=>{class n{constructor(e,i,o){this.modal=e,this.msgSrv=i,this.http=o,this.record={},this.schema={properties:{no:{type:"string",title:"n\xfamero de serie"},owner:{type:"string",title:"Nombre",maxLength:15},callNo:{type:"number",title:"N\xfamero de llamadas"},href:{type:"string",title:"Enlace",format:"uri"},description:{type:"string",title:"describir",maxLength:140}},required:["owner","callNo","href","description"]},this.ui={"*":{spanLabelFixed:100,grid:{span:12}},$no:{widget:"text"},$href:{widget:"string"},$description:{widget:"textarea",grid:{span:24}}}}ngOnInit(){this.record.id>0&&this.http.get(`/user/${this.record.id}`).subscribe(e=>this.i=e)}save(e){this.http.post(`/user/${this.record.id}`,e).subscribe(i=>{this.msgSrv.success("Guardado exitosamente"),this.modal.close(!0)})}close(){this.modal.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.Lf),t.Y36(g.dD),t.Y36(d.lP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-user-edit"]],decls:5,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["class","modal-spin",4,"ngIf"],["mode","edit","button","none",3,"schema","ui","formData",4,"ngIf"],[1,"modal-spin"],["mode","edit","button","none",3,"schema","ui","formData"],["sf",""],[1,"modal-footer"],["nz-button","","type","button",3,"click"],["nz-button","","type","submit","nzType","primary",3,"disabled","nzLoading","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA()(),t.YNc(3,D,1,0,"nz-spin",2),t.YNc(4,G,7,5,"sf",3)),2&e&&(t.xp6(2),t.hij("editar ",i.record.id," informaci\xf3n"),t.xp6(1),t.Q6J("ngIf",!i.i),t.xp6(1),t.Q6J("ngIf",i.i))},dependencies:[_.O5,p.kJ,m.ix,h.w,f.dQ,S.W],encapsulation:2}),n})();const $=["st"];function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._uU(1,"nueva construcci\xf3n"),t.qZA()}}const H=function(){return{total:"data.total",list:"data.list"}},K=function(n){return{reName:n}};let E=(()=>{class n{constructor(e,i){this.http=e,this.modal=i,this.url="/api/user/list",this.searchSchema={properties:{no:{type:"string",title:"n\xfamero de serie"}}},this.columns=[{title:"n\xfamero de serie",type:"no"},{title:"cuenta",index:"account"},{title:"apodo",index:"nickName"},{title:"avatar",type:"img",width:"64px",index:"avatarUrl"},{title:"tiempo",type:"date",index:"updatedAt"},{title:"funcionar",buttons:[{text:"editar",type:"modal",modal:{component:v},click:"reload"}]}]}ngOnInit(){}add(){this.modal.createStatic(v,{i:{id:0}}).subscribe(()=>this.st.reload())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.lP),t.Y36(d.Te))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-user"]],viewQuery:function(e,i){if(1&e&&t.Gf($,5),2&e){let o;t.iGM(o=t.CRH())&&(i.st=o.first)}},decls:7,vars:8,consts:[[3,"action"],["phActionTpl",""],["mode","search",3,"schema","formSubmit","formReset"],[3,"data","res","columns"],["st",""],["nz-button","","nzType","primary",3,"click"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"page-header",0),t.YNc(1,R,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(3,"nz-card")(4,"sf",2),t.NdJ("formSubmit",function(r){t.CHM(o);const l=t.MAs(6);return t.KtG(l.reset(r))})("formReset",function(r){t.CHM(o);const l=t.MAs(6);return t.KtG(l.reset(r))}),t.qZA(),t._UZ(5,"st",3,4),t.qZA()}if(2&e){const o=t.MAs(2);t.Q6J("action",o),t.xp6(4),t.Q6J("schema",i.searchSchema),t.xp6(1),t.Q6J("data",i.url)("res",t.VKq(6,K,t.DdM(5,H)))("columns",i.columns)}},dependencies:[p.kJ,y.q,z.A5,m.ix,h.w,f.dQ,x.bd],encapsulation:2}),n})();function P(n,s){1&n&&t._UZ(0,"nz-spin",4)}function V(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"sf",5,6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.close())}),t._uU(4,"cierre"),t.qZA(),t.TgZ(5,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),a=t.oxw();return t.KtG(a.save(o.value))}),t._uU(6,"aceptar"),t.qZA()()()}if(2&n){const e=t.MAs(1),i=t.oxw();t.Q6J("schema",i.schema)("ui",i.ui)("formData",i.i),t.xp6(5),t.Q6J("disabled",!e.valid)("nzLoading",i.http.loading)}}let Z=(()=>{class n{constructor(e,i,o){this.modal=e,this.msgSrv=i,this.http=o,this.record={},this.schema={properties:{roleValue:{type:"string",title:"identificaci\xf3n de roles"},roleName:{type:"string",title:"Nombre de rol"}},required:["roleName","roleValue"]},this.ui={"*":{spanLabelFixed:100,grid:{span:24}},$roleValue:{widget:"string"},$roleName:{widget:"string"}}}ngOnInit(){console.log("init edit",this.record),null!=this.record.roleId&&this.http.get(`/api/role/info/${this.record.roleId}`).subscribe(e=>this.i=e.data)}save(e){this.http.post(null!=this.record.roleId?"/api/role/update":"/api/role/insert",e).subscribe(o=>{this.msgSrv.success(o.msg),this.modal.close(!0)})}close(){this.modal.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.Lf),t.Y36(g.dD),t.Y36(d.lP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-role-edit"]],decls:5,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["class","modal-spin",4,"ngIf"],["mode","edit","button","none",3,"schema","ui","formData",4,"ngIf"],[1,"modal-spin"],["mode","edit","button","none",3,"schema","ui","formData"],["sf",""],[1,"modal-footer"],["nz-button","","type","button",3,"click"],["nz-button","","type","submit","nzType","primary",3,"disabled","nzLoading","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA()(),t.YNc(3,P,1,0,"nz-spin",2),t.YNc(4,V,7,5,"sf",3)),2&e&&(t.xp6(2),t.hij("editar ",i.record.id," informaci\xf3n"),t.xp6(1),t.Q6J("ngIf",!i.i),t.xp6(1),t.Q6J("ngIf",i.i))},dependencies:[_.O5,p.kJ,m.ix,h.w,f.dQ,S.W],encapsulation:2}),n})();const B=["st"];function j(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._uU(1,"nueva construcci\xf3n"),t.qZA()}}const X=function(){return{total:"data.total",list:"data.list"}},tt=function(n){return{reName:n}};let U=(()=>{class n{constructor(e,i){this.http=e,this.modal=i,this.loading=null,this.url="/api/role/list",this.searchSchema={properties:{roleName:{type:"string",title:"Nombre de rol"},roleValue:{type:"string",title:"identificaci\xf3n de roles"}}},this.columns=[{title:"n\xfamero de serie",type:"no"},{title:"identificaci\xf3n de roles",index:"roleValue"},{title:"Nombre de rol",index:"roleName"},{title:"actualizador",index:"lastModifiedBy",format:o=>function W(n){return null!=n&&n.includes("~~~")?n.split("~~~")[1]:n}(o.lastModifiedBy)},{title:"tiempo de actualizacion",type:"date",index:"lastModifiedDate"},{title:"funcionar",buttons:[{text:"editar",type:"modal",modal:{component:Z},click:"reload"},{text:"borrar",type:"del",click:o=>this.delete(o)}]}]}ngOnInit(){}add(){this.modal.createStatic(Z,{i:{roleId:null}}).subscribe(()=>this.st.reload())}delete(e){this.loading=!0,this.http.post(`/api/role/delete/${e.roleId}`).subscribe(i=>{this.loading=null,this.st.reload()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.lP),t.Y36(d.Te))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-role"]],viewQuery:function(e,i){if(1&e&&t.Gf(B,5),2&e){let o;t.iGM(o=t.CRH())&&(i.st=o.first)}},decls:7,vars:9,consts:[[3,"action"],["phActionTpl",""],["mode","search",3,"schema","formSubmit","formReset"],[3,"data","loading","res","columns"],["st",""],["nz-button","","nzType","primary",3,"click"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"page-header",0),t.YNc(1,j,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(3,"nz-card")(4,"sf",2),t.NdJ("formSubmit",function(r){t.CHM(o);const l=t.MAs(6);return t.KtG(l.reset(r))})("formReset",function(r){t.CHM(o);const l=t.MAs(6);return t.KtG(l.reset(r))}),t.qZA(),t._UZ(5,"st",3,4),t.qZA()}if(2&e){const o=t.MAs(2);t.Q6J("action",o),t.xp6(4),t.Q6J("schema",i.searchSchema),t.xp6(1),t.Q6J("data",i.url)("loading",i.loading)("res",t.VKq(7,tt,t.DdM(6,X)))("columns",i.columns)}},dependencies:[p.kJ,y.q,z.A5,m.ix,h.w,f.dQ,x.bd],encapsulation:2}),n})();function et(n,s){1&n&&t._UZ(0,"nz-spin",4)}function nt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"sf",5,6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.close())}),t._uU(4,"cancelar"),t.qZA(),t.TgZ(5,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),a=t.oxw();return t.KtG(a.save(o.value))}),t._uU(6,"aceptar"),t.qZA()()()}if(2&n){const e=t.MAs(1),i=t.oxw();t.Q6J("schema",i.schema)("ui",i.ui)("formData",i.i),t.xp6(5),t.Q6J("disabled",!e.valid)("nzLoading",i.http.loading)}}let A=(()=>{class n{constructor(e,i,o){this.modal=e,this.msgSrv=i,this.http=o,this.record={},this.schema={properties:{menuName:{type:"string",title:"\u83dc\u5355\u540d\u79f0",maxLength:15},menuCode:{type:"string",title:"\u83dc\u5355\u7f16\u7801"}},required:["menuName","menuCode"]},this.ui={"*":{spanLabelFixed:100,grid:{span:24}},$menuName:{widget:"string"}}}ngOnInit(){}save(e){this.http.post("/api/menu/update",e).subscribe(i=>{this.msgSrv.success(i.msg),this.modal.close(!0)})}close(){this.modal.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.Lf),t.Y36(g.dD),t.Y36(d.lP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-menu-edit"]],decls:5,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["class","modal-spin",4,"ngIf"],["mode","edit","button","none",3,"schema","ui","formData",4,"ngIf"],[1,"modal-spin"],["mode","edit","button","none",3,"schema","ui","formData"],["sf",""],[1,"modal-footer"],["nz-button","","type","button",3,"click"],["nz-button","","type","submit","nzType","primary",3,"disabled","nzLoading","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA()(),t.YNc(3,et,1,0,"nz-spin",2),t.YNc(4,nt,7,5,"sf",3)),2&e&&(t.xp6(2),t.hij("editar ",i.record.id," informaci\xf3n"),t.xp6(1),t.Q6J("ngIf",!i.i),t.xp6(1),t.Q6J("ngIf",i.i))},dependencies:[_.O5,p.kJ,m.ix,h.w,f.dQ,S.W],encapsulation:2}),n})();var T=c(433),b=c(5635),it=c(7096),ot=c(6497),u=c(6675),st=c(7570),at=c(1102),rt=c(2577);function ct(n,s){1&n&&t._UZ(0,"nz-spin",4)}function lt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("nzTooltipTitle",e.authName),t.xp6(1),t.hij(" ",e.authName," ")}}function dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"i",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,a=t.oxw(2);return t.KtG(a.editCache[o.authId].data.authName=null)}),t.qZA()}}function ut(n,s){if(1&n&&t.YNc(0,dt,1,0,"i",23),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("ngIf",i.editCache[e.authId].data.authName)}}function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nz-input-group",20)(1,"input",21),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.editCache[a.authId].data.authName=o)}),t.qZA()(),t.YNc(2,ut,1,1,"ng-template",null,22,t.W1O)}if(2&n){const e=t.MAs(3),i=t.oxw().$implicit,o=t.oxw(2);t.Q6J("nzSuffix",e),t.xp6(1),t.Q6J("maxLength",80)("ngModel",o.editCache[i.authId].data.authName)}}function _t(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("nzTooltipTitle",e.authValue),t.xp6(1),t.hij(" ",e.authValue," ")}}function mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"i",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,a=t.oxw(2);return t.KtG(a.editCache[o.authId].data.authValue=null)}),t.qZA()}}function ht(n,s){if(1&n&&t.YNc(0,mt,1,0,"i",23),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("ngIf",i.editCache[e.authId].data.authValue)}}function ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nz-input-group",20)(1,"input",25),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.editCache[a.authId].data.authValue=o)}),t.qZA()(),t.YNc(2,ht,1,1,"ng-template",null,26,t.W1O)}if(2&n){const e=t.MAs(3),i=t.oxw().$implicit,o=t.oxw(2);t.Q6J("nzSuffix",e),t.xp6(1),t.Q6J("maxLength",80)("ngModel",o.editCache[i.authId].data.authValue)}}function gt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("nzTooltipTitle",e.displayIndex),t.xp6(1),t.hij(" ",e.displayIndex," ")}}function yt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nz-input-number",27),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.editCache[a.authId].data.displayIndex=o)}),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("nzMin",1)("ngModel",i.editCache[e.authId].data.displayIndex)}}function xt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",31),t.NdJ("nzOnConfirm",function(){t.CHM(e);const o=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.recordDel(o.authId))}),t._uU(1," borrar "),t.qZA()}}function Ct(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.startEdit(o.authId))}),t._uU(2,"editar"),t.qZA(),t._UZ(3,"nz-divider",29),t.YNc(4,xt,2,0,"a",30),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.Q6J("ngIf",!i.editCache[e.authId].edit)}}function St(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.saveEdit(o.authId))}),t._uU(1,"aceptar"),t.qZA(),t._UZ(2,"nz-divider",29),t.TgZ(3,"a",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.cancelEdit(o))}),t._uU(4,"cancelar"),t.qZA()}}function Tt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,lt,3,2,"ng-container",13),t.YNc(5,pt,4,3,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(7,"td"),t.YNc(8,_t,3,2,"ng-container",13),t.YNc(9,ft,4,3,"ng-template",null,15,t.W1O),t.qZA(),t.TgZ(11,"td"),t.YNc(12,gt,3,2,"ng-container",13),t.YNc(13,yt,1,2,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(15,"td",17),t.YNc(16,Ct,5,1,"ng-container",13),t.YNc(17,St,5,0,"ng-template",null,18,t.W1O),t.qZA()()),2&n){const e=s.$implicit,i=s.index,o=t.MAs(6),a=t.MAs(10),r=t.MAs(14),l=t.MAs(18),M=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("ngIf",!M.editCache[e.authId].edit)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",!M.editCache[e.authId].edit)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",!M.editCache[e.authId].edit)("ngIfElse",r),t.xp6(4),t.Q6J("ngIf",!M.editCache[e.authId].edit)("ngIfElse",l)}}function Mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"nz-table",5,6)(3,"thead")(4,"tr")(5,"th",7),t._uU(6,"N\xfamero de serie"),t.qZA(),t.TgZ(7,"th",8),t._uU(8,"Nombre del permiso"),t.qZA(),t.TgZ(9,"th",8),t._uU(10,"C\xf3digo de autoridad"),t.qZA(),t.TgZ(11,"th",7),t._uU(12,"Ordenar"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Operaci\xf3n"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Tt,19,9,"tr",10),t.qZA()(),t.TgZ(17,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addListData())}),t._UZ(18,"i",12),t._uU(19,"Agregar permisos "),t.qZA()()}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("nzShowPagination",!1)("nzFrontPagination",!1)("nzTotal",i.powerList.length)("nzData",i.powerList)("nzSize","small")("nzLoading",i.listLoading),t.xp6(15),t.Q6J("ngForOf",e.data)}}let F=(()=>{class n{constructor(e,i,o,a,r){this.modal=e,this.msgSrv=i,this.http=o,this.fb=a,this.ms=r,this.powerList=[],this.editCache={},this.listLoading=!1}ngOnInit(){this.menuId=this.i.menuId,this.loadData()}loadData(){this.http.get(`/api/auth/all?menuId=${this.menuId}`).subscribe(e=>{this.powerList=e.data,this.updateEditCache()})}startEdit(e){this.editCache[e].edit=!0}cancelEdit(e){const i=this.powerList.findIndex(o=>o.authId===e);this.powerList.splice(i,1),this.powerList=[...this.powerList]}saveEdit(e){if(!this.checkNullData(e))return;this.listLoading=!0;const i=this.powerList.findIndex(r=>r.authId===e);Object.assign(this.powerList[i],this.editCache[e].data),this.editCache[e].edit=!1;const o=this.editCache[e].data;this.http.post(null==o.authId?"/api/auth/insert":"/api/auth/update",{authId:o.authId,authName:o.authName,authValue:o.authValue,displayIndex:o.displayIndex,menu:{menuId:this.menuId}}).subscribe(r=>{this.msgSrv.success(r.msg),this.loadData(),this.listLoading=!1})}checkNullData(e){return null===this.editCache[e].data.authName||""===this.editCache[e].data.authName?(this.ms.warning("\xa1Por favor complete el nombre del permiso!"),!1):null!==this.editCache[e].data.authValue&&""!==this.editCache[e].data.authValue||(this.ms.warning("\xa1Por favor complete el c\xf3digo de autoridad!"),!1)}updateEditCache(){this.powerList.forEach(e=>{this.editCache[e.authId]={edit:!1,data:{...e}}})}recordDel(e){this.http.post(`/api/auth/delete/${e}`,{}).subscribe(i=>{this.ms.success(i.msg),this.loadData()})}addListData(){this.powerList=[...this.powerList,{id:"__random__"+Math.random(),name:"",value:"",isNew:!0}],this.powerList.forEach((e,i)=>{this.editCache[e.authId]={edit:e.isNew,data:{...e}}})}close(){this.modal.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.Lf),t.Y36(g.dD),t.Y36(d.lP),t.Y36(T.qu),t.Y36(g.dD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-menu-auth"]],decls:5,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["class","modal-spin",4,"ngIf"],[4,"ngIf"],[1,"modal-spin"],[1,"yz-editable-table",3,"nzShowPagination","nzFrontPagination","nzTotal","nzData","nzSize","nzLoading"],["editRowTable2",""],["nzWidth","50px"],["nzWidth","150px"],["nzWidth","80px"],[4,"ngFor","ngForOf"],["nz-button","","nzType","dashed","nzBlock","",2,"margin-top","16px",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngIf","ngIfElse"],["nameInputTpl2",""],["valueInputTpl2",""],["valueInputTpl3",""],["nzRight","true"],["saveTpl2",""],["nz-tooltip","",3,"nzTooltipTitle"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","nombre de permiso",3,"maxLength","ngModel","ngModelChange"],["nameSuffixTemplate2",""],["nz-icon","","nz-tooltip","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nz-tooltip","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],["type","text","nz-input","","placeholder","c\xf3digo de permiso",3,"maxLength","ngModel","ngModelChange"],["valueSuffixTemplate2",""],["nz-input","","nzPlaceHolder","\u6392\u5e8f\u53f7",3,"nzMin","ngModel","ngModelChange"],[3,"click"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\xbfQuieres eliminar esta l\xednea?",3,"nzOnConfirm",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","\xbfQuieres eliminar esta l\xednea?",3,"nzOnConfirm"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Editar informaci\xf3n de permisos"),t.qZA()(),t.YNc(3,ct,1,0,"nz-spin",2),t.YNc(4,Mt,20,7,"div",3)),2&e&&(t.xp6(3),t.Q6J("ngIf",!i.i),t.xp6(1),t.Q6J("ngIf",i.i))},dependencies:[_.sg,_.O5,T.Fj,T.JJ,T.On,m.ix,h.w,f.dQ,b.Zp,b.gB,b.ke,it._V,ot.JW,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,u.qn,st.SY,at.Ls,S.W,rt.g],encapsulation:2}),n})();function zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._uU(1,"nueva"),t.qZA()}}function vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t.NdJ("nzExpandChange",function(o){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.expand=o)})("nzExpandChange",function(o){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.collapse(l.mapOfExpandedData[r.menuId],a,o))}),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"a",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.edit(o))}),t._uU(11,"editar"),t.qZA(),t.TgZ(12,"a",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.authMgmt(o))}),t._uU(13,"gesti\xf3n de autoridad"),t.qZA(),t.TgZ(14,"a",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.delete(o))}),t._uU(15,"borrar"),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("nzIndentSize",20*e.level)("nzShowExpand",!!e.children&&e.children.length>0)("nzExpand",e.expand),t.xp6(1),t.hij(" ",e.menuName," "),t.xp6(2),t.Oqu(e.menuCode),t.xp6(2),t.Oqu(e.link),t.xp6(2),t.Oqu(e.icon)}}function Zt(n,s){if(1&n&&(t.ynx(0),t.YNc(1,vt,16,7,"tr",7),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.parent&&e.parent.expand||!e.parent)}}function At(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Zt,2,1,"ng-container",5),t.BQk()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.mapOfExpandedData[e.menuId])}}const bt=[{path:"user",component:E},{path:"role",component:U},{path:"menu",component:(()=>{class n{constructor(e,i){this.http=e,this.modal=i,this.searchSchema={properties:{no:{type:"string",title:"n\xfamero de serie"}}},this.loading=!1,this.listOfMapData=[],this.mapOfExpandedData={}}ngOnInit(){this.queryTree()}queryTree(){this.loading=!0,this.http.get("/api/menu/tree").subscribe(e=>{this.listOfMapData=e.data,this.listOfMapData.forEach(i=>{this.mapOfExpandedData[i.menuId]=this.convertTreeToList(i)}),this.loading=!1})}collapse(e,i,o){if(!o){if(!i.children)return;i.children.forEach(a=>{const r=e.find(l=>l.menuId===a.menuId);r.expand=!1,this.collapse(e,r,!1)})}}convertTreeToList(e){const i=[],o=[],a={};for(i.push({...e,level:0,expand:!1});0!==i.length;){const r=i.pop();if(this.visitNode(r,a,o),r.children)for(let l=r.children.length-1;l>=0;l--)i.push({...r.children[l],level:r.level+1,expand:!1,parent:r})}return o}visitNode(e,i,o){i[e.menuId]||(i[e.menuId]=!0,o.push(e))}add(){this.modal.createStatic(A,{i:{menuId:null}}).subscribe(()=>this.queryTree())}search(e){this.queryTree()}reset(e){this.queryTree()}edit(e){this.modal.createStatic(A,{i:e}).subscribe(()=>this.queryTree())}authMgmt(e){this.modal.createStatic(F,{i:e}).subscribe(()=>this.queryTree())}delete(e){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.lP),t.Y36(d.Te))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sys-menu"]],decls:21,vars:5,consts:[[3,"action"],["phActionTpl",""],["mode","search",3,"schema","formSubmit","formReset"],["nzTableLayout","fixed",3,"nzLoading","nzData"],["expandTable",""],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click"],[4,"ngIf"],[3,"nzIndentSize","nzShowExpand","nzExpand","nzExpandChange"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link","nzDanger","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"page-header",0),t.YNc(1,zt,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(3,"nz-card")(4,"sf",2),t.NdJ("formSubmit",function(a){return i.search(a)})("formReset",function(a){return i.reset(a)}),t.qZA(),t.TgZ(5,"nz-table",3,4)(7,"thead")(8,"tr")(9,"th"),t._uU(10,"nombre del men\xfa"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"C\xf3digo de men\xfa"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Enlace"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Icono"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Operaci\xf3n"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,At,2,1,"ng-container",5),t.qZA()()()),2&e){const o=t.MAs(2),a=t.MAs(6);t.Q6J("action",o),t.xp6(4),t.Q6J("schema",i.searchSchema),t.xp6(1),t.Q6J("nzLoading",i.loading)("nzData",i.listOfMapData),t.xp6(15),t.Q6J("ngForOf",a.data)}},dependencies:[_.sg,_.O5,p.kJ,y.q,m.ix,h.w,f.dQ,x.bd,u.N8,u.Uo,u._C,u.h7,u.Om,u.p0,u.$Z],encapsulation:2}),n})()},{path:"log",component:J}];let Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[w.Bz.forChild(bt),w.Bz]}),n})(),wt=(()=>{class n{constructor(e){this.http=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.lP))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),It=(()=>{class n{constructor(e){this.http=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.lP))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Jt=(()=>{class n{constructor(e){this.http=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.lP))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Et=(()=>{class n{constructor(e){this.http=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.lP))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ut=(()=>{class n{constructor(e){this.http=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.lP))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[wt,It,Jt,Et,Ut],imports:[q.m8,Nt]}),n})()}}]);